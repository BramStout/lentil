<% include partials/header %>

<div class="container">
  <nav class="nav">
    <a href="/" class="nav__brand">lentil.labs</a>
    <div class="nav__right">
      <a href="/" class="nav__right__item">lenses</a>/
      <a href="#" class="nav__right__item">gallery</a>/
      <a href="#" class="nav__right__item">changelog</a>/
      <a href="/cart" class="nav__right__item">my cart</a>/
      <a href="#" class="nav__right__item">about us</a>
    </div>
  </nav>

  <div class="description">
    <div class="col-md-6">
      <h3 class="description__left">
        lentil is a camera toolkit for production raytracers 
        capable of rendering images with high-order abberations 
        at a fraction of the cost of tracing rays through the 
        lens elements
      </h3>
    </div>
    <div class="col-md-6">
      <h3 class="description__right">
        the choice of lens greatly helps determine the feeling 
        of practical film. In computer graphics thus far, this 
        has been neglected. Our mission is to change this.
      </h3>
    </div>
  </div>

  <hr>

  <div class="filter">
    <form action="/">
      <p>sort: <span id="company">company <span>&#9660;</span></span> | <span id="filter">filter <span>&#9660;</span></span> | <button class="filter__btn">GO</button></p>
      <div class="filter__company" id="filterCompany">
        <% companies.forEach((company) => { %>
          <label><input type="checkbox" name="company"
            value="<%= company %>"
            > <%= company %></label>
        <% }); %>
        <label><input type="checkbox" name="company"
            value="all"
          > ALL</label>
      </div>
      <div class="filter__filter" id="filterFilter">
        <select name="filter" class="filter__filter__dropdown">
          <option value="year" class="filter__filter__dropdown--option">year</option>
          <option value="focal" class="filter__filter__dropdown--option">focal length</option>
        </select>
      </div>
    </form>
  </div>

</div>


<div class="container">
  <div class="lenses">
    <% lenses.forEach((lens) => { %>
      
      <div class="col-md-4">
        <div class="lenses__card">
          <div class="lenses__card__image">
            <img src="<%= lens.image %>" alt="<%= lens.image %>">
          </div>
          <h3 class="text-center lenses__card__title"><%= lens.company %> | <%= lens.product_name %> | <%= lens.year %></h3>
    
          <% if(user) { %>
            <% if(user.lenses.indexOf(lens._id) == -1) { %>
              <% if(user.cart.indexOf(lens._id) == -1) { %>
                <a href="/<%= lens._id %>/add">Add to cart</a>
              <% } else { %>
                <p>Added to cart</p>
              <% } %>
            <% } else { %>
              <p>You own this!</p>
            <% } %>
          <% } %>
        </div>
      </div>
    <% }); %>
  </div>
</div>

<% include partials/footer %>